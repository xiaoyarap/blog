<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>社交分享Footer</title>
    <style>
        /* Footer 基础样式 */
        .site-footer {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 40px 0 20px;
            margin-top: 50px;
        }

        .footer-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* 分享区域样式 */
        .social-share {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 1px solid #34495e;
        }

        .share-title {
            font-size: 18px;
            margin-bottom: 20px;
            color: #bdc3c7;
        }

        .share-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .share-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            text-decoration: none;
            color: white;
            font-size: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .share-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.1);
            transform: scale(0);
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .share-btn:hover::before {
            transform: scale(1);
        }

        .share-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* 各平台颜色 */
        .wechat { background: linear-gradient(135deg, #1aad19, #00d100); }
        .weibo { background: linear-gradient(135deg, #e6162d, #ff6b6b); }
        .twitter { background: linear-gradient(135deg, #1da1f2, #4da6ff); }
        .facebook { background: linear-gradient(135deg, #3b5998, #4c70ba); }
        .linkedin { background: linear-gradient(135deg, #0077b5, #00a0dc); }
        .telegram { background: linear-gradient(135deg, #0088cc, #229ed9); }
        .whatsapp { background: linear-gradient(135deg, #25d366, #128c7e); }
        .qq { background: linear-gradient(135deg, #eb1923, #f39c12); }
        .email { background: linear-gradient(135deg, #34495e, #7f8c8d); }
        .copy-link { background: linear-gradient(135deg, #9b59b6, #8e44ad); }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .share-buttons {
                gap: 10px;
            }
            
            .share-btn {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
        }

        /* Footer 其他内容样式 */
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 20px;
        }

        .footer-section h3 {
            color: #3498db;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .footer-section p, .footer-section a {
            color: #bdc3c7;
            text-decoration: none;
            line-height: 1.6;
        }

        .footer-section a:hover {
            color: #3498db;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #34495e;
            font-size: 14px;
            color: #95a5a6;
        }

        /* 复制成功提示 */
        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #27ae60;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <footer class="site-footer">
        <div class="footer-wrapper">
            <!-- 社交分享区域 -->
            <div class="social-share">
                <h3 class="share-title">分享到社交平台</h3>
                <div class="share-buttons">
                    <!-- 微信分享 -->
                    <a href="#" class="share-btn wechat" onclick="shareToWechat()" title="分享到微信">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8.5 6C7.1 6 6 7.1 6 8.5S7.1 11 8.5 11 11 9.9 11 8.5 9.9 6 8.5 6M15.5 13C14.1 13 13 14.1 13 15.5S14.1 18 15.5 18 18 16.9 18 15.5 16.9 13 15.5 13M8.5 9C8.8 9 9 8.8 9 8.5S8.8 8 8.5 8 8 8.2 8 8.5 8.2 9 8.5 9M15.5 16C15.8 16 16 15.8 16 15.5S15.8 15 15.5 15 15 15.2 15 15.5 15.2 16 15.5 16M18.9 10.5C17.6 8.8 15.8 7.7 13.7 7.2C13.3 5.6 11.9 4.5 10.1 4.5C7.8 4.5 6 6.3 6 8.5C6 9.2 6.2 9.9 6.5 10.5C4.8 11.8 3.7 13.6 3.2 15.7C1.6 16.1 0.5 17.5 0.5 19.3C0.5 21.6 2.3 23.4 4.5 23.4C5.2 23.4 5.9 23.2 6.5 22.9C7.8 24.6 9.6 25.7 11.7 26.2C12.1 27.8 13.5 28.9 15.3 28.9C17.6 28.9 19.4 27.1 19.4 24.9C19.4 24.2 19.2 23.5 18.9 22.9C20.6 21.6 21.7 19.8 22.2 17.7C23.8 17.3 24.9 15.9 24.9 14.1C24.9 11.8 23.1 10 20.9 10C20.2 10 19.5 10.2 18.9 10.5Z"/>
                        </svg>
                    </a>

                    <!-- 微博分享 -->
                    <a href="#" class="share-btn weibo" onclick="shareToWeibo()" title="分享到微博">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9.9 14.5C9.3 15.2 8.1 15.4 6.9 14.9C5.7 14.4 5.1 13.3 5.7 12.6C6.3 11.9 7.5 11.7 8.7 12.2C9.9 12.7 10.5 13.8 9.9 14.5M12.2 11.1C11.9 11.5 11.2 11.6 10.5 11.3C9.8 11 9.5 10.4 9.8 10C10.1 9.6 10.8 9.5 11.5 9.8C12.2 10.1 12.5 10.7 12.2 11.1M21 8.1C20.5 7.3 19.5 6.9 18.4 7.1C18.6 6.8 18.7 6.4 18.6 6C18.4 5.2 17.6 4.7 16.5 4.9C15.4 5.1 14.7 5.9 14.9 6.7C15 7.1 15.3 7.4 15.7 7.5C14.8 8.1 13.6 8.3 12.3 8C10.5 7.6 8.8 8.2 7.7 9.5C6.6 10.8 6.4 12.5 7.2 13.9C8.5 16.3 11.6 17.1 14 16.1C16.4 15.1 17.2 12.6 15.9 10.2C15.4 9.2 14.6 8.5 13.6 8.1C14.9 7.9 16.1 8.2 16.9 9C17.7 9.8 17.8 11 17.2 12C17.8 11.7 18.3 11.2 18.5 10.5C18.9 9.4 18.5 8.3 17.6 7.6C19.5 7.4 21 8.6 21 10.3C21 12 19.5 13.2 17.6 13C18.5 12.3 18.9 11.2 18.5 10.1C18.3 9.4 17.8 8.9 17.2 8.6C17.8 7.6 17.7 6.4 16.9 5.6C16.1 4.8 14.9 4.7 13.6 5.5C14.6 5.1 15.4 4.4 15.9 3.4C16.2 2.8 16.2 2.1 15.8 1.6C15.1 0.6 13.8 0.4 12.7 1.1C11.6 1.8 11.4 3.1 12.1 4.1C12.5 4.7 13.2 5 13.9 4.9C12.2 5.5 10.2 5.4 8.4 4.6C6.1 3.6 3.6 4.4 2.2 6.3C0.8 8.2 1.2 10.7 3.1 12.2C5.8 14.4 10.1 14.9 13.4 13.2C16.7 11.5 17.2 8.2 14.5 6C14.9 5.8 15.4 5.7 15.9 5.8C17.2 6 18.2 7 18.4 8.3C18.6 9.6 18 10.8 16.9 11.5C18.8 11.3 20.3 10.1 20.3 8.4C20.3 6.7 18.8 5.5 16.9 5.7C17.8 5 18.2 3.9 17.8 2.8C17.4 1.7 16.2 1 14.9 1.2C13.6 1.4 12.9 2.6 13.3 3.7C13.5 4.3 14 4.7 14.6 4.8C12.3 5.6 9.5 5.2 7.2 3.8C4.2 2 0.5 3.2 -1.3 6.2C-3.1 9.2 -2.5 13.2 0.5 15.8C4.3 19.2 10.3 19.9 15.2 17.5C20.1 15.1 21 9.8 17.2 6.4C18.3 6.1 19.4 6.5 19.9 7.3C20.4 8.1 20.1 9.1 19.3 9.6C20.2 9.4 20.9 8.8 21 7.9C21.1 6.8 20.4 5.8 19.3 5.6C20.8 5.8 21.9 7.1 21.9 8.8C21.9 10.5 20.8 11.8 19.3 12C20.4 11.8 21.1 10.8 21 9.7C20.9 8.8 20.2 8.2 19.3 8.4C20.1 7.9 20.4 6.9 19.9 6.1C19.4 5.3 18.3 4.9 17.2 5.2C17.2 6.4 17.2 7.6 17.2 8.8"/>
                        </svg>
                    </a>

                    <!-- Twitter分享 -->
                    <a href="#" class="share-btn twitter" onclick="shareToTwitter()" title="分享到Twitter">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </a>

                    <!-- Facebook分享 -->
                    <a href="#" class="share-btn facebook" onclick="shareToFacebook()" title="分享到Facebook">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                    </a>

                    <!-- LinkedIn分享 -->
                    <a href="#" class="share-btn linkedin" onclick="shareToLinkedIn()" title="分享到LinkedIn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </a>

                    <!-- Telegram分享 -->
                    <a href="#" class="share-btn telegram" onclick="shareToTelegram()" title="分享到Telegram">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                        </svg>
                    </a>

                    <!-- WhatsApp分享 -->
                    <a href="#" class="share-btn whatsapp" onclick="shareToWhatsApp()" title="分享到WhatsApp">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"/>
                        </svg>
                    </a>

                    <!-- QQ分享 -->
                    <a href="#" class="share-btn qq" onclick="shareToQQ()" title="分享到QQ">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.009-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.739.097.118.11.221.082.342-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.748-1.378 0 0-.599 2.282-.744 2.840-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24.001 12.017 24.001c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001 12.017.001z"/>
                        </svg>
                    </a>

                    <!-- 邮件分享 -->
                    <a href="#" class="share-btn email" onclick="shareByEmail()" title="邮件分享">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                        </svg>
                    </a>

                    <!-- 复制链接 -->
                    <a href="#" class="share-btn copy-link" onclick="copyLink()" title="复制链接">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Footer 其他内容 -->
            <div class="footer-content">
                <div class="footer-section">
                    <h3>关于我们</h3>
                    <p>这里是网站的简介描述，可以介绍网站的主要内容和目标。</p>
                </div>
                <div class="footer-section">
                    <h3>快速链接</h3>
                    <p><a href="/">首页</a></p>
                    <p><a href="/about">关于</a></p>
                    <p><a href="/contact">联系我们</a></p>
                </div>
                <div class="footer-section">
                    <h3>联系方式</h3>
                    <p>邮箱: contact@example.com</p>
                    <p>电话: +86 123 4567 8900</p>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2024 网站名称. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <!-- 复制成功提示 -->
    <div class="copy-success" id="copySuccess">链接已复制到剪贴板!</div>

    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 原有的图片代理功能
            const images = document.querySelectorAll('img[src*="mmbiz.qpic.cn"]');
            images.forEach(img => {
                img.src = 'https://images.weserv.nl/?url=' + encodeURIComponent(img.src);
            });
        });

        // 获取当前页面信息
        function getPageInfo() {
            return {
                title: document.title || '分享标题',
                url: window.location.href,
                description: document.querySelector('meta[name="description"]')?.content || '分享描述'
            };
        }

        // 微信分享（生成二维码或提示）
        function shareToWechat() {
            const pageInfo = getPageInfo();
            console.log('微信分享 - 页面信息:', pageInfo);
            
            // 检查是否在微信环境中
            const isWechat = /micromessenger/i.test(navigator.userAgent);
            
            if (isWechat) {
                // 在微信中可以调用微信分享API
                alert('请点击右上角的分享按钮分享到微信');
            } else {
                // 非微信环境，可以生成二维码或其他方式
                const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(pageInfo.url)}`;
                const newWindow = window.open('', '_blank', 'width=300,height=350');
                if (newWindow) {
                    newWindow.document.write(`
                        <html>
                            <head><title>微信分享二维码</title></head>
                            <body style="text-align:center; padding:20px; font-family:Arial;">
                                <h3>扫描二维码分享到微信</h3>
                                <img src="${qrUrl}" alt="二维码" style="border:1px solid #ccc;">
                                <p style="margin-top:10px; font-size:12px; color:#666;">
                                    ${pageInfo.title}
                                </p>
                            </body>
                        </html>
                    `);
                } else {
                    alert('请允许弹窗或手动复制链接分享：' + pageInfo.url);
                }
            }
        }

        // 微博分享
        function shareToWeibo() {
            const pageInfo = getPageInfo();
            console.log('微博分享 - 页面信息:', pageInfo);
            
            const shareText = `${pageInfo.title} - ${pageInfo.description}`;
            const url = `https://service.weibo.com/share/share.php?title=${encodeURIComponent(shareText)}&url=${encodeURIComponent(pageInfo.url)}`;
            
            console.log('微博分享URL:', url);
            
            const newWindow = window.open(url, '_blank', 'width=600,height=450,scrollbars=yes,resizable=yes');
            if (!newWindow) {
                alert('请允许弹窗后重试，或复制以下链接手动打开：\n' + url);
            }
        }

        // Twitter分享
        function shareToTwitter() {
            const pageInfo = getPageInfo();
            console.log('Twitter分享 - 页面信息:', pageInfo);
            
            const tweetText = pageInfo.title.length > 240 ? pageInfo.title.substring(0, 240) + '...' : pageInfo.title;
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}&url=${encodeURIComponent(pageInfo.url)}`;
            
            console.log('Twitter分享URL:', url);
            
            const newWindow = window.open(url, '_blank', 'width=550,height=450,scrollbars=yes,resizable=yes');
            if (!newWindow) {
                alert('请允许弹窗后重试，或复制以下链接手动打开：\n' + url);
            }
        }

        // Facebook分享
        function shareToFacebook() {
            const pageInfo = getPageInfo();
            console.log('Facebook分享 - 页面信息:', pageInfo);
            
            const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(pageInfo.url)}&t=${encodeURIComponent(pageInfo.title)}`;
            
            console.log('Facebook分享URL:', url);
            
            const newWindow = window.open(url, '_blank', 'width=626,height=436,scrollbars=yes,resizable=yes');
            if (!newWindow) {
                alert('请允许弹窗后重试，或复制以下链接手动打开：\n' + url);
            }
        }

        // LinkedIn分享
        function shareToLinkedIn() {
            const pageInfo = getPageInfo();
            console.log('LinkedIn分享 - 页面信息:', pageInfo);
            
            const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(pageInfo.url)}`;
            
            console.log('LinkedIn分享URL:', url);
            
            const newWindow = window.open(url, '_blank', 'width=520,height=570,scrollbars=yes,resizable=yes');
            if (!newWindow) {
                alert('请允许弹窗后重试，或复制以下链接手动打开：\n' + url);
            }
        }

        // Telegram分享
        function shareToTelegram() {
            const pageInfo = getPageInfo();
            console.log('Telegram分享 - 页面信息:', pageInfo);
            
            const url = `https://t.me/share/url?url=${encodeURIComponent(pageInfo.url)}&text=${encodeURIComponent(pageInfo.title)}`;
            
            console.log('Telegram分享URL:', url);
            
            // Telegram可以直接跳转，不需要弹窗
            try {
                window.open(url, '_blank');
            } catch (error) {
                console.error('Telegram分享失败:', error);
                alert('跳转失败，请复制以下链接手动打开：\n' + url);
            }
        }

        // WhatsApp分享
        function shareToWhatsApp() {
            const pageInfo = getPageInfo();
            console.log('WhatsApp分享 - 页面信息:', pageInfo);
            
            const shareText = `${pageInfo.title}\n${pageInfo.url}`;
            const url = `https://wa.me/?text=${encodeURIComponent(shareText)}`;
            
            console.log('WhatsApp分享URL:', url);
            
            // WhatsApp可以直接跳转
            try {
                window.open(url, '_blank');
            } catch (error) {
                console.error('WhatsApp分享失败:', error);
                alert('跳转失败，请复制以下链接手动打开：\n' + url);
            }
        }

        // QQ分享
        function shareToQQ() {
            const pageInfo = getPageInfo();
            console.log('QQ分享 - 页面信息:', pageInfo);
            
            const url = `https://connect.qq.com/widget/shareqq/index.html?url=${encodeURIComponent(pageInfo.url)}&title=${encodeURIComponent(pageInfo.title)}&desc=${encodeURIComponent(pageInfo.description)}&summary=${encodeURIComponent(pageInfo.description)}&site=${encodeURIComponent(window.location.hostname)}`;
            
            console.log('QQ分享URL:', url);
            
            const newWindow = window.open(url, '_blank', 'width=600,height=450,scrollbars=yes,resizable=yes');
            if (!newWindow) {
                alert('请允许弹窗后重试，或复制以下链接手动打开：\n' + url);
            }
        }

        // 邮件分享
        function shareByEmail() {
            const pageInfo = getPageInfo();
            const subject = encodeURIComponent(pageInfo.title);
            const body = encodeURIComponent(`我想分享这个链接给你：\n\n${pageInfo.title}\n${pageInfo.url}\n\n${pageInfo.description}`);
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
        }

        // 复制链接到剪贴板
        function copyLink() {
            const pageInfo = getPageInfo();
            
            // 使用现代的 Clipboard API
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(pageInfo.url).then(() => {
                    showCopySuccess();
                }).catch(err => {
                    // 回退到传统方法
                    fallbackCopyTextToClipboard(pageInfo.url);
                });
            } else {
                // 回退到传统方法
                fallbackCopyTextToClipboard(pageInfo.url);
            }
        }

        // 传统的复制方法（兼容旧浏览器）
        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";
            textArea.style.opacity = "0";

            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopySuccess();
                } else {
                    alert('复制失败，请手动复制链接：' + text);
                }
            } catch (err) {
                alert('复制失败，请手动复制链接：' + text);
            }

            document.body.removeChild(textArea);
        }

        // 显示复制成功提示
        function showCopySuccess() {
            const successMsg = document.getElementById('copySuccess');
            successMsg.style.display = 'block';
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 2000);
        }

        // 调试函数 - 检查页面信息
        function debugPageInfo() {
            const info = getPageInfo();
            console.log('页面信息:', info);
            console.log('当前URL:', window.location.href);
            return info;
        }